import { NextRequest, NextResponse } from 'next/server'
import { prisma } from '@/lib/prisma'

export async function GET() {
  try {
    // Hizmet sayısını kontrol et
    const serviceCount = await prisma.service.count()
    
    // İlk 5 hizmeti getir
    const services = await prisma.service.findMany({
      take: 5,
      select: {
        id: true,
        name: true,
        businessId: true,
        business: {
          select: {
            name: true
          }
        }
      }
    })
    
    return NextResponse.json({
      serviceCount,
      sampleServices: services,
      message: serviceCount > 0 ? 'Hizmetler mevcut' : 'Henüz hizmet kaydı yok'
    })
    
  } catch (error) {
    console.error('Service check error:', error)
    return NextResponse.json({ error: String(error) }, { status: 500 })
  }
}
